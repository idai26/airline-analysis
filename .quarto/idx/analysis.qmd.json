{"title":"July 2024 Airline Data Analysis","markdown":{"yaml":{"title":"July 2024 Airline Data Analysis","format":"html","code-fold":true},"headingText":"Load the airline maximum delay dataset","containsRefs":false,"markdown":"\n```{r, echo = FALSE, warning=FALSE, message=FALSE}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(packcircles)\nlibrary(ggforce)\n\ndelay_data <- read_csv(\"../hw4_problem1.csv\")\n\n# Load the time series dataset\ntime_data <- read_csv(\"../hw4_problem7.csv\")\n\ntime_data <- time_data %>%\n  mutate(flight_date = ymd(flight_date))\n\n# Load the day of week dataset\ndow_data <- read_csv(\"../hw4_problem3.csv\")\n\ndow_data <- dow_data %>%\n  mutate(day = factor(day,\n                              levels = c(\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\")))\n\n# Load the cancellation reasons dataset\ncancellations <- read_csv(\"../hw4_problem6b.csv\") |> \n  filter(cancellation_count > 100)\n```\nThinking about flying on your summer vacation? Worried about delays, cancellations, or the best days to fly? By looking at past data, in this case information on all flights within the United States during July 2024, we can get insights into flight patterns that could save you from headaches on your future journeys.\n\n## Time Series of Average Flights per Day\nFirst, you might want to know that dates tend to be busier. This data is imperfect since we only know the number of flights, not the number of people flying. However, this is still a useful proxy for how busy the airports are likely to be. \n\n```{r, warning=FALSE, message=FALSE}\ntime_data |>\n    ggplot(aes(x = flight_date, y = avg_flights_3_day_rolling))+\n    geom_line(color = \"blue\") +\n    geom_vline(xintercept = ymd(\"2024-07-04\"), linetype=\"dashed\", color = \"red\") +\n    geom_text(aes(x = ymd(\"2024-07-04\"), y = max(avg_flights_3_day_rolling), label = \"July 4th\"), \n              vjust = 20, hjust = 1.1, color = \"red\") +\n    labs(title = \"3-Day Rolling Average of Flights per Day - July 2024\",\n         x = \"Date\",\n         y = \"Average Flights (3-Day Rolling)\") +\n    theme_minimal()+\n    scale_y_continuous(labels = scales::comma)\n```\n\nLooking at a three-day rolling average of total flights, it appears that the days around July 4th have fewer flights than the rest of the month. The three-day rolling average hovers areound 20,750 flights for most of the month, but dips as low as 19,000 in the days just after July 4th. If you want to avoid crowds, it might be best to fly right after the 4th of July - but you of course run the risk of cutting your vacation short! Plus, given supply and demand, you might find flights are more expensive on those days.\n\n\n## Busiests Days of the Week to Fly\nEven if you're not flying for the Fourth of July, you might be planning other sorts of travel. Which days of the week are the busiest? \n\n```{r, warning=FALSE, message=FALSE}\ndow_data |>\n    ggplot(aes(x = day, y = count, fill = count)) +\n    geom_bar(stat = \"identity\") +\n    scale_fill_gradient(low = \"forestgreen\", high = \"red\") +\n    labs(title = \"Total Number of Flights by Day of the Week - July 2024\",\n         x = \"Day of the Week\",\n         y = \"Total Number of Flights\") +\n    theme_minimal()+\n    theme(legend.position = \"none\")+\n    scale_y_continuous(labels = scales::comma)\n```\n\nBased on this bar chart, Monday, Tuesday, and Wednesdays had the most flights in July 2024, with each day seeing around 100,000 flights. Saturdays were the least busy, with just over 75,000 flights. Given these patterns, it looks like business travel is a significant driver of air traffic. If you have flexibility, it looks like a Saturday-Saturday trip could save you some hassle at the airport. But again, if everyone has the same idea, you might find yourself fighting for cheaper tickets, so be sure to book far in advance!\n\n## Delays by Airline\nOn most routes, you'll have a choice in airlines. If your first concern is getting to your destination on time, you might want to consider the airlines that haven't had extremely lengthy delays.\n```{r, warning=FALSE, message=FALSE}\ndelay_data |>\nmutate(name = str_extract(name, \"^[^:]+\")) |>\n  ggplot(aes(x = reorder(name, -max_delay), y = max_delay, fill = max_delay)) +\n  geom_bar(stat = \"identity\") +\n  scale_fill_gradient(low = \"forestgreen\", high = \"red\") +\n  labs(title = \"Maximum Delay (Minutes) by Airline - July 2024\",\n     x = \"Airline\",\n     y = \"Maximum Delay (Minutes)\") +\n  theme_minimal() +\n  scale_y_continuous(labels = scales::comma) +\n  theme(legend.position = \"none\",\n      axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\nNote that these are the *maximum* delays, not the average delays, so we have cherry-picked the worst case scenartio for each airline. That being said, the more than 3,000 minute delay (over 50 hours!) on American Airlines might give the punctual traveler pause. Most other airlines' maximum delays range from 1,000 to 1,500 minutes. Alaska Airlines has the best record, with a maximum delat of just under 500 minutes (about 8 hours). Not great, but your not likely to be stranded overnight with them!\n\n## Top Cancellation Reasons for Busiest Airports\nFinally, you might be curious about what causes cancellations, and if there are certain airports more prone to cancellations than others. \n```{r, warning=FALSE, message=FALSE}\n# Extract city names\ncancellations <- cancellations %>%\n  mutate(city = str_extract(airport_code, \"^[^,]+\"))\n\n# Step 1: Aggregate by cancellation reason\nreason_summary <- cancellations %>%\n  group_by(cancellation_reason) %>%\n  summarise(\n    total_count = sum(cancellation_count),\n    n_airports = n(),\n    .groups = \"drop\"\n  )\n\n# Step 2: Pack outer circles (one per cancellation reason)\nouter_layout <- circleProgressiveLayout(reason_summary$total_count, sizetype = \"area\")\nouter_circles <- bind_cols(reason_summary, outer_layout)\n\n# Step 3: For each cancellation reason, pack inner circles (airports)\ninner_data <- cancellations %>%\n  group_by(cancellation_reason) %>%\n  group_modify(~ {\n    # Pack circles for airports within this reason\n    inner_pack <- circleProgressiveLayout(.x$cancellation_count, sizetype = \"area\")\n    \n    # Get the corresponding outer circle\n    outer <- outer_circles %>% filter(cancellation_reason == .y$cancellation_reason)\n    \n    # Calculate scaling to fit inner circles within outer circle\n    # Find the bounding circle of inner packing\n    cx <- mean(inner_pack$x)\n    cy <- mean(inner_pack$y)\n    max_dist <- max(sqrt((inner_pack$x - cx)^2 + (inner_pack$y - cy)^2) + inner_pack$radius)\n    \n    # Scale to fit within 75% of outer radius (leaving margin)\n    scale <- ifelse(max_dist > 0, (outer$radius * 0.85) / max_dist, 1)\n    \n    # Transform coordinates\n    .x %>%\n      mutate(\n        x = outer$x + (inner_pack$x - cx) * scale,\n        y = outer$y + (inner_pack$y - cy) * scale,\n        radius = inner_pack$radius * scale\n      )\n  }) %>%\n  ungroup()\n\n# Step 4: Plot\nggplot() +\n  # Outer circles (cancellation reasons)\n  geom_circle(\n    data = outer_circles,\n    aes(x0 = x, y0 = y, r = radius, fill = cancellation_reason),\n    alpha = 0.25,\n    color = \"white\",\n    linewidth = 3\n  ) +\n  # Inner circles (individual airports)\n  geom_circle(\n    data = inner_data,\n    aes(x0 = x, y0 = y, r = radius, fill = cancellation_reason),\n    alpha = 0.75,\n    color = \"white\",\n    linewidth = 1\n  ) +\n  # Outer labels (cancellation reasons)\n  geom_text(\n    data = outer_circles,\n    aes(x = x, y = y - radius * 0.85, label = cancellation_reason),\n    color = \"darkgrey\",\n    fontface = \"bold\",\n    size = 6\n  ) +\n  # Inner labels (city names)\n  geom_text(\n    data = inner_data,\n    aes(x = x, y = y, label = city),\n    color = \"white\",\n    size = 2.5,\n    fontface = \"bold\"\n  ) +\n  scale_fill_brewer(palette = \"Set2\") +\n  coord_equal() +\n  theme_void() +\n  theme(\n    legend.position = \"none\"\n  )\n```\n\nLooking at this packed circle chart, we see that carrier issues are far-and-away the top cause for cancellations at busy airports. Atlanta, the world's busiest airport, sticks out like a sore thumb for carrier cancellations, followed by Minneapolis, Detroit, and Salt Lake City. These are all Delta hubs, so it seems that Delta had an issue with cancellations in July 2024. Houston's two airports (Hobby and Bush), Charlotte, and Washington-Reagan were the only major airports where weather was the top reason for cancellations. If you're flying into or out of these airports, be sure to check the weather before you head to the airport - you just might end up being there longer than you planned!","srcMarkdownNoYaml":"\n```{r, echo = FALSE, warning=FALSE, message=FALSE}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(packcircles)\nlibrary(ggforce)\n\n# Load the airline maximum delay dataset\ndelay_data <- read_csv(\"../hw4_problem1.csv\")\n\n# Load the time series dataset\ntime_data <- read_csv(\"../hw4_problem7.csv\")\n\ntime_data <- time_data %>%\n  mutate(flight_date = ymd(flight_date))\n\n# Load the day of week dataset\ndow_data <- read_csv(\"../hw4_problem3.csv\")\n\ndow_data <- dow_data %>%\n  mutate(day = factor(day,\n                              levels = c(\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\")))\n\n# Load the cancellation reasons dataset\ncancellations <- read_csv(\"../hw4_problem6b.csv\") |> \n  filter(cancellation_count > 100)\n```\nThinking about flying on your summer vacation? Worried about delays, cancellations, or the best days to fly? By looking at past data, in this case information on all flights within the United States during July 2024, we can get insights into flight patterns that could save you from headaches on your future journeys.\n\n## Time Series of Average Flights per Day\nFirst, you might want to know that dates tend to be busier. This data is imperfect since we only know the number of flights, not the number of people flying. However, this is still a useful proxy for how busy the airports are likely to be. \n\n```{r, warning=FALSE, message=FALSE}\ntime_data |>\n    ggplot(aes(x = flight_date, y = avg_flights_3_day_rolling))+\n    geom_line(color = \"blue\") +\n    geom_vline(xintercept = ymd(\"2024-07-04\"), linetype=\"dashed\", color = \"red\") +\n    geom_text(aes(x = ymd(\"2024-07-04\"), y = max(avg_flights_3_day_rolling), label = \"July 4th\"), \n              vjust = 20, hjust = 1.1, color = \"red\") +\n    labs(title = \"3-Day Rolling Average of Flights per Day - July 2024\",\n         x = \"Date\",\n         y = \"Average Flights (3-Day Rolling)\") +\n    theme_minimal()+\n    scale_y_continuous(labels = scales::comma)\n```\n\nLooking at a three-day rolling average of total flights, it appears that the days around July 4th have fewer flights than the rest of the month. The three-day rolling average hovers areound 20,750 flights for most of the month, but dips as low as 19,000 in the days just after July 4th. If you want to avoid crowds, it might be best to fly right after the 4th of July - but you of course run the risk of cutting your vacation short! Plus, given supply and demand, you might find flights are more expensive on those days.\n\n\n## Busiests Days of the Week to Fly\nEven if you're not flying for the Fourth of July, you might be planning other sorts of travel. Which days of the week are the busiest? \n\n```{r, warning=FALSE, message=FALSE}\ndow_data |>\n    ggplot(aes(x = day, y = count, fill = count)) +\n    geom_bar(stat = \"identity\") +\n    scale_fill_gradient(low = \"forestgreen\", high = \"red\") +\n    labs(title = \"Total Number of Flights by Day of the Week - July 2024\",\n         x = \"Day of the Week\",\n         y = \"Total Number of Flights\") +\n    theme_minimal()+\n    theme(legend.position = \"none\")+\n    scale_y_continuous(labels = scales::comma)\n```\n\nBased on this bar chart, Monday, Tuesday, and Wednesdays had the most flights in July 2024, with each day seeing around 100,000 flights. Saturdays were the least busy, with just over 75,000 flights. Given these patterns, it looks like business travel is a significant driver of air traffic. If you have flexibility, it looks like a Saturday-Saturday trip could save you some hassle at the airport. But again, if everyone has the same idea, you might find yourself fighting for cheaper tickets, so be sure to book far in advance!\n\n## Delays by Airline\nOn most routes, you'll have a choice in airlines. If your first concern is getting to your destination on time, you might want to consider the airlines that haven't had extremely lengthy delays.\n```{r, warning=FALSE, message=FALSE}\ndelay_data |>\nmutate(name = str_extract(name, \"^[^:]+\")) |>\n  ggplot(aes(x = reorder(name, -max_delay), y = max_delay, fill = max_delay)) +\n  geom_bar(stat = \"identity\") +\n  scale_fill_gradient(low = \"forestgreen\", high = \"red\") +\n  labs(title = \"Maximum Delay (Minutes) by Airline - July 2024\",\n     x = \"Airline\",\n     y = \"Maximum Delay (Minutes)\") +\n  theme_minimal() +\n  scale_y_continuous(labels = scales::comma) +\n  theme(legend.position = \"none\",\n      axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\nNote that these are the *maximum* delays, not the average delays, so we have cherry-picked the worst case scenartio for each airline. That being said, the more than 3,000 minute delay (over 50 hours!) on American Airlines might give the punctual traveler pause. Most other airlines' maximum delays range from 1,000 to 1,500 minutes. Alaska Airlines has the best record, with a maximum delat of just under 500 minutes (about 8 hours). Not great, but your not likely to be stranded overnight with them!\n\n## Top Cancellation Reasons for Busiest Airports\nFinally, you might be curious about what causes cancellations, and if there are certain airports more prone to cancellations than others. \n```{r, warning=FALSE, message=FALSE}\n# Extract city names\ncancellations <- cancellations %>%\n  mutate(city = str_extract(airport_code, \"^[^,]+\"))\n\n# Step 1: Aggregate by cancellation reason\nreason_summary <- cancellations %>%\n  group_by(cancellation_reason) %>%\n  summarise(\n    total_count = sum(cancellation_count),\n    n_airports = n(),\n    .groups = \"drop\"\n  )\n\n# Step 2: Pack outer circles (one per cancellation reason)\nouter_layout <- circleProgressiveLayout(reason_summary$total_count, sizetype = \"area\")\nouter_circles <- bind_cols(reason_summary, outer_layout)\n\n# Step 3: For each cancellation reason, pack inner circles (airports)\ninner_data <- cancellations %>%\n  group_by(cancellation_reason) %>%\n  group_modify(~ {\n    # Pack circles for airports within this reason\n    inner_pack <- circleProgressiveLayout(.x$cancellation_count, sizetype = \"area\")\n    \n    # Get the corresponding outer circle\n    outer <- outer_circles %>% filter(cancellation_reason == .y$cancellation_reason)\n    \n    # Calculate scaling to fit inner circles within outer circle\n    # Find the bounding circle of inner packing\n    cx <- mean(inner_pack$x)\n    cy <- mean(inner_pack$y)\n    max_dist <- max(sqrt((inner_pack$x - cx)^2 + (inner_pack$y - cy)^2) + inner_pack$radius)\n    \n    # Scale to fit within 75% of outer radius (leaving margin)\n    scale <- ifelse(max_dist > 0, (outer$radius * 0.85) / max_dist, 1)\n    \n    # Transform coordinates\n    .x %>%\n      mutate(\n        x = outer$x + (inner_pack$x - cx) * scale,\n        y = outer$y + (inner_pack$y - cy) * scale,\n        radius = inner_pack$radius * scale\n      )\n  }) %>%\n  ungroup()\n\n# Step 4: Plot\nggplot() +\n  # Outer circles (cancellation reasons)\n  geom_circle(\n    data = outer_circles,\n    aes(x0 = x, y0 = y, r = radius, fill = cancellation_reason),\n    alpha = 0.25,\n    color = \"white\",\n    linewidth = 3\n  ) +\n  # Inner circles (individual airports)\n  geom_circle(\n    data = inner_data,\n    aes(x0 = x, y0 = y, r = radius, fill = cancellation_reason),\n    alpha = 0.75,\n    color = \"white\",\n    linewidth = 1\n  ) +\n  # Outer labels (cancellation reasons)\n  geom_text(\n    data = outer_circles,\n    aes(x = x, y = y - radius * 0.85, label = cancellation_reason),\n    color = \"darkgrey\",\n    fontface = \"bold\",\n    size = 6\n  ) +\n  # Inner labels (city names)\n  geom_text(\n    data = inner_data,\n    aes(x = x, y = y, label = city),\n    color = \"white\",\n    size = 2.5,\n    fontface = \"bold\"\n  ) +\n  scale_fill_brewer(palette = \"Set2\") +\n  coord_equal() +\n  theme_void() +\n  theme(\n    legend.position = \"none\"\n  )\n```\n\nLooking at this packed circle chart, we see that carrier issues are far-and-away the top cause for cancellations at busy airports. Atlanta, the world's busiest airport, sticks out like a sore thumb for carrier cancellations, followed by Minneapolis, Detroit, and Salt Lake City. These are all Delta hubs, so it seems that Delta had an issue with cancellations in July 2024. Houston's two airports (Hobby and Bush), Charlotte, and Washington-Reagan were the only major airports where weather was the top reason for cancellations. If you're flying into or out of these airports, be sure to check the weather before you head to the airport - you just might end up being there longer than you planned!"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"analysis.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.54","theme":"cosmo","title":"July 2024 Airline Data Analysis"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}